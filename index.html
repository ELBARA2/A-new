<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>A-mine</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #bebcae;
            margin: 0;
            padding: 20px;
            text-align: center;
        }
        #gameboard {
            margin: 50px auto;
            border-spacing: 0;
        }
        #gameboard td {
            width: 100px;
            height: 100px;
            text-align: center;
            vertical-align: middle;
            font-size: 60px;
            font-weight: bold;
            cursor: pointer;
            position: relative;
        }
        #gameboard tr:not(:last-child) td {
            border-bottom: 5px solid #333;
        }
        #gameboard td:not(:last-child) {
            border-right: 5px solid #333;
        }
        #gameboard button {
            width: 100%;
            height: 100%;
            font-size: 60px;
            border: none;
            background: transparent;
            cursor: pointer;
        }
        #gameboard p {
            display: none;
            margin: 0;
            font-size: 60px;
            line-height: 100px;
        }
        #messages {
            text-align: center;
            margin-top: 20px;
        }
        #messages h2 {
            margin: 10px 0;
        }
        #restart {
            display: none;
            margin: 20px auto 0;
            background-color: #000;
            color: #fff;
            width: 120px;
            height: 50px;
            font-size: 20px;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            transition: 0.3s;
        }
        #y, #c {
            background-color: #00000031;
            font-size: 20px;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            transition: 0.3s;
        }
        #theme1, #theme2 {
            position: fixed;
            top: 20px;            
            left: 20px;
            z-index: 1000;
            background-color: #000000;
            color: #fff;
            font-size: 20px;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            transition: 0.3s;
            margin-left: 10px;
        }
        #info {
            border: 2px solid #000;
            margin: 20px auto;
            width: 200px;
            border-collapse: collapse;
        }
        #info td {
            border: 1px solid #000;
            padding: 5px;
            text-align: center;
        }
        #info p {
            display: block;
            font-size: 20px;
            margin: 5px 0;
        }
        #X00, #X01, #X02, #X10, #X11, #X12, #X20, #X21, #X22{
            color: #ff0000;
        }
        #O00, #O01, #O02, #O10, #O11, #O12, #O20, #O21, #O22{
            color: #0000ff;
        }
        #yx p, #yo p {
            display: inline;
        }
        #yc p {
            display: inline;
            margin: 0;
        }
        @media screen and (max-width: 768px) {
            body {
                padding: 10px;
                font-size: 14px;
            }
            #theme1, #theme2 {
                position: fixed;
                top: 10px;
                left: 10px;
                font-size: 16px;
                padding: 8px 12px;
                margin-left: 0;
                width: auto;
                height: auto;
            }
            #messages {
                margin-top: 60px;
                padding: 0 10px;
            }
            #messages h2 {
                font-size: 18px;
                margin: 8px 0;
                line-height: 1.3;
            }
            #y, #c {
                padding: 10px 15px;
                margin: 5px;
                font-size: 18px;
                min-height: 44px;
                min-width: 44px;
            }
            #gameboard {
                margin: 20px auto;
                width: 100%;
                max-width: 300px;
            }
            #gameboard td {
                width: 80px;
                height: 80px;
                font-size: 48px;
            }
            #gameboard button {
                font-size: 48px;
                min-height: 80px;
                min-width: 80px;
            }
            #gameboard p {
                font-size: 48px;
                line-height: 80px;
            }
            #restart {
                width: 100px;
                height: 44px;
                font-size: 16px;
                margin: 15px auto;
            }
            #info {
                width: 150px;
                margin: 15px auto;
            }
            #info p {
                font-size: 16px;
                margin: 3px 0;
            }
            hr {
                width: 150px !important;
                margin: 8px auto !important;
            }
            #yx p, #yo p {
                display: inline;
                font-size: 16px;
            }
        }
        @media screen and (max-width: 480px) {
            body {
                padding: 5px;
            }
            #messages h2 {
                font-size: 16px;
            }
            #gameboard td {
                width: 70px;
                height: 70px;
                font-size: 40px;
            }
            #gameboard button {
                font-size: 40px;
                min-height: 70px;
                min-width: 70px;
            }
            #gameboard p {
                font-size: 40px;
                line-height: 70px;
            }
            #theme1, #theme2 {
                font-size: 14px;
                padding: 6px 10px;
            }
        }
        @media screen and (max-height: 600px) and (orientation: landscape) {
            #messages {
                margin-top: 50px;
            }
            #messages h2 {
                margin: 5px 0;
                font-size: 14px;
            }
            #gameboard {
                margin: 10px auto;
            }
            #gameboard td {
                width: 60px;
                height: 60px;
                font-size: 36px;
            }
            #gameboard button {
                font-size: 36px;
            }
            #gameboard p {
                font-size: 36px;
                line-height: 60px;
            }
        }
        @media screen and (max-width: 768px) {
            button {
                font-size: 16px;
            }
        }
        @media (hover: none) and (pointer: coarse) {
            #gameboard button:active {
                background-color: rgba(0,0,0,0.1);
                transform: scale(0.95);
            }
            #restart:active, #y:active, #c:active, #theme1:active, #theme2:active {
                transform: scale(0.95);
                opacity: 0.8;
            }
        }
    </style>
</head>
<body>
    <button id="theme1" onclick="theme()">darkmode</button><button id="theme2" onclick="theme()" style="display:none;">lightmode</button>
    <div id="messages">
        <h2 id="yc">wanna play as <button id="y" style="color: #0000ff;" onclick="notfirstplayer()">X</button> or <button id="c" style="color: #ff0000;" onclick="firstplayer()">O</button></h2>
        <hr style="border: 1px solid #38583a; width: 200px; margin: 10px auto;">
        <h2 id="yx" style="display:block;">you're playing as <p style="color: #0000ff;">X</p> [first player]</h2>
        <h2 id="yo" style="display:none;">you're playing as <p style="color: #ff0000;">O</p> [seconed player]</h2><br>
        <h2 id="c'win'o" style="color: #0000ff; display:none;">computer win</h2>
        <h2 id="c'win'x" style="color: #ff0000; display:none;">computer win</h2>
        <h2 id="y'win'o" style="color: #0000ff; display:none;">you win</h2>
        <h2 id="y'win'x" style="color: #ff0000; display:none;">you win</h2>
        <h2 id="draw" style="color: #000000; display:none;">draw</h2>
        <button id="restart" onclick="restart()" style="display:none;">restart</button>
    </div>
    <table id="gameboard">
        <tr>
            <td><button onclick="corner1()" id="00"></button><p id="X00">O</p><p id="O00">X</p></td>
            <td><button onclick="edge1()" id="01"></button><p id="X01">O</p><p id="O01">X</p></td>
            <td><button onclick="corner2()" id="02"></button><p id="X02">O</p><p id="O02">X</p></td>
        </tr>
        <tr>
            <td><button onclick="edge2()" id="10"></button><p id="X10">O</p><p id="O10">X</p></td> 
            <td><button onclick="center()" id="11"></button><p id="X11">O</p><p id="O11">X</p></td> 
            <td><button onclick="edge3()" id="12"></button><p id="X12">O</p><p id="O12">X</p></td> 
        </tr>
        <tr> 
            <td><button onclick="corner3()" id="20"></button><p id="X20">O</p><p id="O20">X</p></td>
            <td><button onclick="edge4()" id="21"></button><p id="X21">O</p><p id="O21">X</p></td> 
            <td><button onclick="corner4()" id="22"></button><p id="X22">O</p><p id="O22">X</p></td> 
        </tr>
    </table>
    <table id="info"><tr><td><p>you</p></td><td><p>A I</p></td></tr><tr><td><p id="player">0</p></td><td><p id="computer">0</p></td></tr></table>
    <script>
        let count = 0;
        let player = 0;
        let computer = 0;
        let dark = false;
        let victory = false;
        let first = false;
        let edge1x = false;
        let edge2x = false;
        let edge3x = false;
        let edge4x = false;
        let corner1x = false;
        let corner2x = false;
        let corner3x = false;
        let corner4x = false;
        let centerx = false;
        let edge1o = false;
        let edge2o = false;
        let edge3o = false;
        let edge4o = false;
        let corner1o = false;
        let corner2o = false;
        let corner3o = false;
        let corner4o = false;
        let centero = false;
        function theme() {
            if(!dark){
                dark = true;
                document.body.style.backgroundColor = "#333";
                document.body.style.color = "#fff";
                document.getElementById("draw").style.color = "#fff"
                document.getElementById("info").style.color = "#fff";
                document.getElementById("info").style.borderColor = "#fff";
                document.querySelectorAll("#info td").forEach(td => {
                    td.style.borderColor = "#fff";
                });
                document.querySelectorAll("#gameboard td").forEach(td => {
                    td.style.borderColor = "#b6b6b6";
                });
                document.getElementById("theme1").style.display = "none";
                document.getElementById("theme2").style.display = "block";
            }else{
                dark = false;
                document.body.style.backgroundColor = "#b6b6b6";
                document.body.style.color = "#000";
                document.getElementById("draw").style.color = "#000";
                document.getElementById("info").style.borderColor = "#000";
                document.getElementById("info").style.color = "#000";
                document.querySelectorAll("#info td").forEach(td => {
                    td.style.borderColor = "#000";
                });
                document.querySelectorAll("#gameboard td").forEach(td => {
                    td.style.borderColor = "#333";
                });
                document.getElementById("theme1").style.display = "block";
                document.getElementById("theme2").style.display = "none";
            }
        }
        function corner1() {
            document.getElementById("00").style.display="none";
            count++;
            if(count%2==0){
                document.getElementById("X00").style.display="block";
                corner1x = true;
            } else {
                document.getElementById("O00").style.display="block";
                corner1o = true;
            }
            Victory();
        }
        function edge1() {
            document.getElementById("01").style.display="none";
            count++;
            if(count%2==0){
                document.getElementById("X01").style.display="block";
                edge1x = true;
            } else {
                document.getElementById("O01").style.display="block";
                edge1o = true;
            }
            Victory();
        }
        function corner2() {
            document.getElementById("02").style.display="none";
            count++;
            if(count%2==0){
                document.getElementById("X02").style.display="block";
                corner2x = true;
            } else {
                document.getElementById("O02").style.display="block";
                corner2o = true;
            }
            Victory();
        }
        function edge2() {
            document.getElementById("10").style.display="none";
            count++;
            if(count%2==0){
                document.getElementById("X10").style.display="block";
                edge2x = true;
            } else {
                document.getElementById("O10").style.display="block";
                edge2o = true;
            }
            Victory();
        }
        function center() {
            document.getElementById("11").style.display="none";
            count++;
            if(count%2==0){
                document.getElementById("X11").style.display="block";
                centerx = true;
            } else {
                document.getElementById("O11").style.display="block";
                centero = true;
            }
            Victory();
        }
        function edge3() {
            document.getElementById("12").style.display="none";
            count++;
            if(count%2==0){
                document.getElementById("X12").style.display="block";
                edge3x = true;
            } else {
                document.getElementById("O12").style.display="block";
                edge3o = true;
            }
            Victory();
        }
        function corner3() {
            document.getElementById("20").style.display="none";
            count++;
            if(count%2==0){
                document.getElementById("X20").style.display="block";
                corner3x = true;
            } else {
                document.getElementById("O20").style.display="block";
                corner3o = true;
            }
            Victory();
        }
        function edge4() {
            document.getElementById("21").style.display="none";
            count++;
            if(count%2==0){
                document.getElementById("X21").style.display="block";
                edge4x = true;
            } else {
                document.getElementById("O21").style.display="block";
                edge4o = true;
            }
            Victory();
        }
        function corner4() {
            document.getElementById("22").style.display="none";
            count++;
            if(count%2==0){
                document.getElementById("X22").style.display="block";
                corner4x = true;
            } else {
                document.getElementById("O22").style.display="block";
                corner4o = true;
            }
            Victory();
        }
        function firstplayer() {
            if(count===0){
                first = true;
                randomechoice();
                document.getElementById("yx").style.display="none";
                document.getElementById("yo").style.display="block";
            }
        }
        function notfirstplayer() {
            if(count===1){
                first = false;
                document.getElementById("yx").style.display="block";
                document.getElementById("yo").style.display="none";
                restart();
            }
        }
        function randomechoice() {
        let choices = [corner1, edge1, corner2, edge2, center, edge3, corner3, edge4, corner4];
        choices = choices.filter(fn => {
            if (fn === corner1) return !corner1x && !corner1o;
            if (fn === edge1)   return !edge1x   && !edge1o;
            if (fn === corner2) return !corner2x && !corner2o;
            if (fn === edge2)   return !edge2x   && !edge2o;
            if (fn === center)  return !centerx  && !centero;
            if (fn === edge3)   return !edge3x   && !edge3o;
            if (fn === corner3) return !corner3x && !corner3o;
            if (fn === edge4)   return !edge4x   && !edge4o;
            if (fn === corner4) return !corner4x && !corner4o;
        });
        let randomIndex = Math.floor(Math.random() * choices.length);
        let randomFunc = choices[randomIndex];
        randomFunc();
        }
        function Victory() {
            if(corner1x&&edge1x&&corner2x||corner3x&&edge4x&&corner4x||edge2x&&centerx&&edge3x||corner1x&&edge2x&&corner3x||corner2x&&edge3x&&corner4x||edge1x&&centerx&&edge4x||corner1x&&centerx&&corner4x||corner2x&&centerx&&corner3x){    
                document.getElementById("restart").style.display="block";
                document.getElementById("00").style.display="none";
                document.getElementById("01").style.display="none";
                document.getElementById("02").style.display="none";
                document.getElementById("10").style.display="none";
                document.getElementById("11").style.display="none";
                document.getElementById("12").style.display="none";
                document.getElementById("20").style.display="none";
                document.getElementById("21").style.display="none";
                document.getElementById("22").style.display="none"; 
                victory = true;  
                if(!first){ 
                    computer ++; 
                    document.getElementById("computer").innerHTML=computer;
                    document.getElementById("c'win'x").style.display="block";
                } else {  
                    player ++;
                    document.getElementById("player").innerHTML=player;  
                    document.getElementById("y'win'x").style.display="block";
                }  
            } else if(corner1o&&edge1o&&corner2o||corner3o&&edge4o&&corner4o||edge2o&&centero&&edge3o||corner1o&&edge2o&&corner3o||corner2o&&edge3o&&corner4o||edge1o&&centero&&edge4o||corner1o&&centero&&corner4o||corner2o&&centero&&corner3o){  
                document.getElementById("restart").style.display="block";
                document.getElementById("00").style.display="none";
                document.getElementById("01").style.display="none";
                document.getElementById("02").style.display="none";
                document.getElementById("10").style.display="none";
                document.getElementById("11").style.display="none";
                document.getElementById("12").style.display="none";
                document.getElementById("20").style.display="none";
                document.getElementById("21").style.display="none";
                document.getElementById("22").style.display="none";
                victory = true;  
                if(first){
                    computer ++;
                    document.getElementById("computer").innerHTML=computer;
                    document.getElementById("c'win'o").style.display="block";
                }
                else{
                    player ++;
                    document.getElementById("player").innerHTML=player;
                    document.getElementById("y'win'o").style.display="block";
                }
            }else if(count==9){
                document.getElementById("draw").style.display="block";
                document.getElementById("restart").style.display="block";
            }
            if(first&&count%2==0&&!victory){
                if((edge1o&&corner2o || edge2o&&corner3o || corner4o&&centero)&&!corner1x&&!corner1o){
                    corner1();
                }
                else if((corner1o&&corner2o || centero&&edge4o)&&!edge1x&&!edge1o){
                    edge1();
                }
                else if((corner1o&&edge1o || edge3o&&corner4o || corner3o&&centero)&&!corner2x&&!corner2o){
                    corner2();
                }
                else if((corner3o&&corner1o || centero&&edge3o)&&!edge2x&&!edge2o){
                    edge2();
                }
                else if((edge1o&&edge4o || corner1o&&corner4o || corner2o&&corner3o || edge2o&&edge4o)&&!centerx&&!centero){
                    center();
                }
                else if((centero&&edge2o || corner4o&&corner2o)&&!edge3x&&!edge3o){
                    edge3();
                }
                else if((corner4o&&corner3o || edge1o&&centero)&&!edge4x&&!edge4o){
                    edge4();
                }
                else if((edge4o&&corner4o || edge2o&&corner1o || centero&&corner2o)&&!corner3x&&!corner3o){
                    corner3();
                }
                else if((edge4o&&corner3o || edge3o&&corner2o || centero&&corner1o)&&!corner4x&&!corner4o){
                    corner4();
                }
                else if((edge1x&&corner2x || edge2x&&corner3x || corner4x&&centerx)&&!corner1o&&!corner1x){
                    corner1();
                }
                else if((corner1x&&corner2x || centerx&&edge4x)&&!edge1o&&!edge1x){
                    edge1();
                }
                else if((corner1x&&edge1x || edge3x&&corner4x || corner3x&&centerx)&&!corner2o&&!corner2x){
                    corner2();
                }
                else if((corner3x&&corner1x || centerx&&edge3x)&&!edge2o&&!edge2x){
                    edge2();
                }
                else if((edge1x&&edge4x || corner1x&&corner4x || corner2x&&corner3x || edge2x&&edge4x)&&!centerx&&!centero){
                    center();
                }
                else if((centerx&&edge2x || corner4x&&corner2x)&&!edge3o&&!edge3x){
                    edge3();
                }
                else if((corner4x&&corner3x || edge1x&&centerx)&&!edge4o&&!edge4x){
                    edge4();
                }
                else if((edge4x&&corner4x || edge2x&&corner1x || centerx&&corner2x)&&!corner3o&&!corner3x){
                    corner3();
                }
                else if((edge4x&&corner3x || edge3x&&corner2x || centerx&&corner1x)&&!corner4o&&!corner4x){
                    corner4();
                }
                else{
                    randomechoice();
                }
            }
            if(!first&&count==1&&!centero){
                center();
            }
            else if(!first&&count==1){
                randomechoice();
            }
            if(!first&&count%2==1&&!victory){
                if((edge1x&&corner2x || edge2x&&corner3x || corner4x&&centerx)&&!corner1o&&!corner1x){
                    corner1();
                }
                else if((corner1x&&corner2x || centerx&&edge4x)&&!edge1o&&!edge1x){
                    edge1();
                }
                else if((corner1x&&edge1x || edge3x&&corner4x || corner3x&&centerx)&&!corner2o&&!corner2x){
                    corner2();
                }
                else if((corner3x&&corner1x || centerx&&edge3x)&&!edge2o&&!edge2x){
                    edge2();
                }
                else if((edge1x&&edge4x || corner1x&&corner4x || corner2x&&corner3x || edge2x&&edge4x)&&!centerx&&!centero){
                    center();
                }
                else if((centerx&&edge2x || corner4x&&corner2x)&&!edge3o&&!edge3x){
                    edge3();
                }
                else if((corner4x&&corner3x || edge1x&&centerx)&&!edge4o&&!edge4x){
                    edge4();
                }
                else if((edge4x&&corner4x || edge2x&&corner1x || centerx&&corner2x)&&!corner3o&&!corner3x){
                    corner3();
                }
                else if((edge4x&&corner3x || edge3x&&corner2x || centerx&&corner1x)&&!corner4o&&!corner4x){
                    corner4();
                }
                else if((edge1o&&corner2o || edge2o&&corner3o || corner4o&&centero)&&!corner1x&&!corner1o){
                    corner1();
                }
                else if((corner1o&&corner2o || centero&&edge4o)&&!edge1x&&!edge1o){
                    edge1();
                }
                else if((corner1o&&edge1o || edge3o&&corner4o || corner3o&&centero)&&!corner2x&&!corner2o){
                    corner2();
                }
                else if((corner3o&&corner1o || centero&&edge3o)&&!edge2x&&!edge2o){
                    edge2();
                }
                else if((edge1o&&edge4o || corner1o&&corner4o || corner2o&&corner3o || edge2o&&edge4o)&&!centerx&&!centero){
                    center();
                }
                else if((centero&&edge2o || corner4o&&corner2o)&&!edge3x&&!edge3o){
                    edge3();
                }
                else if((corner4o&&corner3o || edge1o&&centero)&&!edge4x&&!edge4o){
                    edge4();
                }
                else if((edge4o&&corner4o || edge2o&&corner1o || centero&&corner2o)&&!corner3x&&!corner3o){
                    corner3();
                }
                else if((edge4o&&corner3o || edge3o&&corner2o || centero&&corner1o)&&!corner4x&&!corner4o){
                    corner4();
                }
                else{
                    randomechoice();
                }
            }
        }
        function restart() {
            document.getElementById("c'win'x").style.display="none";
            document.getElementById("c'win'o").style.display="none";
            document.getElementById("y'win'x").style.display="none";
            document.getElementById("y'win'o").style.display="none";
            document.getElementById("draw").style.display="none";
            document.getElementById("restart").style.display="none";
            count = 0;
            victory = false;
            edge1x = false;
            edge2x = false;
            edge3x = false;
            edge4x = false;
            corner1x = false;
            corner2x = false;
            corner3x = false;
            corner4x = false;
            centerx = false;
            edge1o = false;
            edge2o = false;
            edge3o = false;
            edge4o = false;
            corner1o = false;
            corner2o = false;
            corner3o = false;
            corner4o = false;
            centero = false;
            document.getElementById("00").style.display="block";
            document.getElementById("01").style.display="block";
            document.getElementById("02").style.display="block";
            document.getElementById("10").style.display="block";
            document.getElementById("11").style.display="block";
            document.getElementById("12").style.display="block";
            document.getElementById("20").style.display="block";
            document.getElementById("21").style.display="block";
            document.getElementById("22").style.display="block";
            document.getElementById("X00").style.display="none";
            document.getElementById("X01").style.display="none";
            document.getElementById("X02").style.display="none";
            document.getElementById("X10").style.display="none";
            document.getElementById("X11").style.display="none";
            document.getElementById("X12").style.display="none";
            document.getElementById("X20").style.display="none";
            document.getElementById("X21").style.display="none";
            document.getElementById("X22").style.display="none";
            document.getElementById("O00").style.display="none";
            document.getElementById("O01").style.display="none";
            document.getElementById("O02").style.display="none";
            document.getElementById("O10").style.display="none";
            document.getElementById("O11").style.display="none";
            document.getElementById("O12").style.display="none";
            document.getElementById("O20").style.display="none";
            document.getElementById("O21").style.display="none";
            document.getElementById("O22").style.display="none";
            if(first){
                firstplayer();
            }
        }
    </script>
</body>
</html>
