<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>A-mine</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #b6b6b6;
            text-align: center;
        }
        #theme1, #theme2, #langa {
            position: fixed;
            top: 20px;            
            left: 20px;
            z-index: 1000;
            background-color: #000000;
            color: #fff;
            font-size: 20px;
            border-radius: 8px;
            border: none;
        }
        #langa {
            left: 130px;
        }
        #theme2 {
            background-color: #fff;
            color: #000;
        }
        #yc button {
            background-color: #3a30301f;
            border: none;
            border-radius: 25%;
            font-size: 25px;
        }
        #yo p, #yx p {
            display: inline;
        }
        #messages {
            border-radius: 20%;
            width: 250px;
            height: 100px;
            background-color: #ffffffce;
            text-align: center;
            position: fixed;
            top: 50%; 
            left: 50%; 
            transform: translate(-50%, -50%); 
        }
        #overly {
            position: fixed;
            top: 0px;
            left: 0px;
            width: 100%;
            height: 100%;
            background-color: #000000aa;
            display: none;
        }
        #restart {
            margin-left: auto;
            margin-right: auto;
            background-color: #000000;
            color: #fff;
            font-size: 20px;
            border-radius: 8px;
            border: none;
        }
        #gameboard {
            margin-left: auto;
            margin-right: auto;
            border-collapse: collapse;
        }
        #gameboard button {
            width: 90px;
            height: 90px;
            background-color: #00000000;
            border: none;
        }
        #gameboard p {
            display: none;
            margin: 0;
            font-size: 50px;
        }
        #X00, #X01, #X02, #X10, #X11, #X12, #X20, #X21, #X22{
            color: #ff0000;
        }
        #O00, #O01, #O02, #O10, #O11, #O12, #O20, #O21, #O22{
            color: #0000ff;
        }
        #e1, #c2, #e3 {
            border-bottom: 5px solid #333;
            border-left: 5px solid #333;
            width: 100px;
            height: 100px;
        }
        #e2, #c3, #e4 {
            border-top: 5px solid #333;
            border-right: 5px solid #333;
            width: 100px;
            height: 100px;
        }
        #info {
            border: 2px solid #000;
            margin: 20px auto;
            width: 200px;
            border-collapse: collapse;
        }
        #info td {
            border: 1px solid #000;
            padding: 5px;
            text-align: center;
        }
        #info p {
            display: block;
            font-size: 20px;
            margin: 5px 0;
        }
    </style>
</head>
<body>
    <button id="theme1" onclick="theme()">darkmode</button><button id="theme2" onclick="theme()" style="display:none;">lightmode</button>
    <button id="langa" onclick="langa()">ع</button>
    <h2 id="yc">wanna play as <button id="y" style="color: #0000ff;" onclick="notfirstplayer()">X</button> or <button id="c" style="color: #ff0000;" onclick="firstplayer()">O</button></h2>
    <hr style="border: 1px solid #38583a; width: 200px; margin: 10px auto;">
    <h2 id="yx" style="display:block;">you're playing as <p style="color: #0000ff;">X</p> [first player]</h2>
    <h2 id="yo" style="display:none;">you're playing as <p style="color: #ff0000;">O</p> [seconed player]</h2><br>
    <div id="overly">  
        <div id="messages">
            <h2 id="c'win" style="display: none;">computer win</h2>
            <h2 id="y'win" style="display: none;">you win</h2>
            <h2 id="draw" style="display: none;">draw</h2>
            <button id="restart" onclick="restart()" style="display:none;">restart</button>
        </div>
    </div>
    <table id="gameboard">
        <tr>
            <td id="c1"><button onclick="corner1()" id="00"></button><p id="X00">O</p><p id="O00">X</p></td>
            <td id="e1"><button onclick="edge1()" id="01"></button><p id="X01">O</p><p id="O01">X</p></td>
            <td id="c2"><button onclick="corner2()" id="02"></button><p id="X02">O</p><p id="O02">X</p></td>
        </tr>
        <tr>
            <td id="e2"><button onclick="edge2()" id="10"></button><p id="X10">O</p><p id="O10">X</p></td> 
            <td id="ce"><button onclick="center()" id="11"></button><p id="X11">O</p><p id="O11">X</p></td> 
            <td id="e3"><button onclick="edge3()" id="12"></button><p id="X12">O</p><p id="O12">X</p></td> 
        </tr>
        <tr> 
            <td id="c3"><button onclick="corner3()" id="20"></button><p id="X20">O</p><p id="O20">X</p></td>
            <td id="e4"><button onclick="edge4()" id="21"></button><p id="X21">O</p><p id="O21">X</p></td> 
            <td id="c4"><button onclick="corner4()" id="22"></button><p id="X22">O</p><p id="O22">X</p></td> 
        </tr>
    </table>
    <table id="info"><tr><td><p id="yy">you</p></td><td><p id="cc">computer</p></td></tr><tr><td><p id="player">0</p></td><td><p id="computer">0</p></td></tr></table>
    <script>
        let count = 0;
        let player = 0;
        let computer = 0;
        let dark = false;
        let langauge = false;
        let victory = false;
        let first = false;
        let edge1x = false;
        let edge2x = false;
        let edge3x = false;
        let edge4x = false;
        let corner1x = false;
        let corner2x = false;
        let corner3x = false;
        let corner4x = false;
        let centerx = false;
        let edge1o = false;
        let edge2o = false;
        let edge3o = false;
        let edge4o = false;
        let corner1o = false;
        let corner2o = false;
        let corner3o = false;
        let corner4o = false;
        let centero = false;
        function theme() {
            if(!dark){
                dark = true;
                document.body.style.backgroundColor = "#333";
                document.body.style.color = "#fff";
                document.getElementById("messages").style.backgroundColor = "#000000ce";
                document.getElementById("draw").style.color = "#fff";
                document.getElementById("c'win").style.color = "#fff";
                document.getElementById("y'win").style.color = "#fff";
                document.getElementById("restart").style.backgroundColor = "#fff";
                document.getElementById("restart").style.color = "#000";
                document.getElementById("info").style.color = "#fff";
                document.getElementById("info").style.borderColor = "#fff";
                document.querySelectorAll("#info td").forEach(td => {
                    td.style.borderColor = "#fff";
                });
                document.querySelectorAll("#gameboard td").forEach(td => {
                    td.style.borderColor = "#b6b6b6";
                });
                document.getElementById("theme1").style.display = "none";
                document.getElementById("theme2").style.display = "block";
                document.getElementById("langa").style.backgroundColor = "#fff";
                document.getElementById("langa").style.color = "#000";
            }else{
                dark = false;
                document.body.style.backgroundColor = "#b6b6b6";
                document.body.style.color = "#000";
                document.getElementById("messages").style.backgroundColor = "#ffffffce";
                document.getElementById("c'win").style.color = "#000";
                document.getElementById("y'win").style.color = "#000";
                document.getElementById("draw").style.color = "#000";
                document.getElementById("restart").style.backgroundColor = "#000";
                document.getElementById("restart").style.color = "#fff";
                document.getElementById("info").style.borderColor = "#000";
                document.getElementById("info").style.color = "#000";
                document.querySelectorAll("#info td").forEach(td => {
                    td.style.borderColor = "#000";
                });
                document.querySelectorAll("#gameboard td").forEach(td => {
                    td.style.borderColor = "#333";
                });
                document.getElementById("theme1").style.display = "block";
                document.getElementById("theme2").style.display = "none";
                document.getElementById("langa").style.backgroundColor = "#000";
                document.getElementById("langa").style.color = "#fff";
            }
        }
        function langa() {
            if(!langauge) {
                langauge = true;
                document.getElementById("theme1").innerHTML="الوضع الليلي";
                document.getElementById("theme2").innerHTML="الوضع النهاري";
                document.getElementById("langa").innerHTML="EN";    
                document.getElementById("yc").innerHTML='<button id="c" style="color: #ff0000;" onclick="firstplayer()">O</button> تريد أن تلعب كـ<button id="y" style="color: #0000ff;" onclick="notfirstplayer()">X</button> أو ';
                document.getElementById("yx").innerHTML='أنت تلعب كـ<p style="color: #0000ff;">X</p> [اللاعب الأول]';
                document.getElementById("yo").innerHTML='أنت تلعب كـ<p style="color: #ff0000;">O</p> [اللاعب الثاني]';
                document.getElementById("c'win").innerHTML="الكمبيوتر فاز";
                document.getElementById("y'win").innerHTML="أنت فزت";
                document.getElementById("draw").innerHTML="تعادل";
                document.getElementById("restart").innerHTML="إعادة";
                document.getElementById("yy").innerHTML="اللاعب";
                document.getElementById("cc").innerHTML="الكمبيوتر";
            } else {
                langauge = false;
                document.getElementById("theme1").innerHTML="darkmode";
                document.getElementById("theme2").innerHTML="lightmode";
                document.getElementById("langa").innerHTML="ع";
                document.getElementById("yc").innerHTML='wanna play as <button id="y" style="color: #0000ff;" onclick="notfirstplayer()">X</button> or <button id="c" style="color: #ff0000;" onclick="firstplayer()">O</button>';
                document.getElementById("yx").innerHTML='you\'re playing as <p style="color: #0000ff;">X</p> [first player]';
                document.getElementById("yo").innerHTML='you\'re playing as <p style="color: #ff0000;">O</p> [seconed player]';
                document.getElementById("c'win").innerHTML="computer win";
                document.getElementById("y'win").innerHTML="you win";
                document.getElementById("draw").innerHTML="draw";
                document.getElementById("restart").innerHTML="restart";
                document.getElementById("yy").innerHTML="you";
                document.getElementById("cc").innerHTML="computer";
            }
        }
        function corner1() {
            document.getElementById("00").style.display="none";
            count++;
            if(count%2==0){
                document.getElementById("X00").style.display="block";
                corner1x = true;
            } else {
                document.getElementById("O00").style.display="block";
                corner1o = true;
            }
            Victory();
        }
        function edge1() {
            document.getElementById("01").style.display="none";
            count++;
            if(count%2==0){
                document.getElementById("X01").style.display="block";
                edge1x = true;
            } else {
                document.getElementById("O01").style.display="block";
                edge1o = true;
            }
            Victory();
        }
        function corner2() {
            document.getElementById("02").style.display="none";
            count++;
            if(count%2==0){
                document.getElementById("X02").style.display="block";
                corner2x = true;
            } else {
                document.getElementById("O02").style.display="block";
                corner2o = true;
            }
            Victory();
        }
        function edge2() {
            document.getElementById("10").style.display="none";
            count++;
            if(count%2==0){
                document.getElementById("X10").style.display="block";
                edge2x = true;
            } else {
                document.getElementById("O10").style.display="block";
                edge2o = true;
            }
            Victory();
        }
        function center() {
            document.getElementById("11").style.display="none";
            count++;
            if(count%2==0){
                document.getElementById("X11").style.display="block";
                centerx = true;
            } else {
                document.getElementById("O11").style.display="block";
                centero = true;
            }
            Victory();
        }
        function edge3() {
            document.getElementById("12").style.display="none";
            count++;
            if(count%2==0){
                document.getElementById("X12").style.display="block";
                edge3x = true;
            } else {
                document.getElementById("O12").style.display="block";
                edge3o = true;
            }
            Victory();
        }
        function corner3() {
            document.getElementById("20").style.display="none";
            count++;
            if(count%2==0){
                document.getElementById("X20").style.display="block";
                corner3x = true;
            } else {
                document.getElementById("O20").style.display="block";
                corner3o = true;
            }
            Victory();
        }
        function edge4() {
            document.getElementById("21").style.display="none";
            count++;
            if(count%2==0){
                document.getElementById("X21").style.display="block";
                edge4x = true;
            } else {
                document.getElementById("O21").style.display="block";
                edge4o = true;
            }
            Victory();
        }
        function corner4() {
            document.getElementById("22").style.display="none";
            count++;
            if(count%2==0){
                document.getElementById("X22").style.display="block";
                corner4x = true;
            } else {
                document.getElementById("O22").style.display="block";
                corner4o = true;
            }
            Victory();
        }
        function firstplayer() {
            if(count===0){
                first = true;
                randomechoice();
                document.getElementById("yx").style.display="none";
                document.getElementById("yo").style.display="block";
            }
        }
        function notfirstplayer() {
            if(count===1){
                first = false;
                document.getElementById("yx").style.display="block";
                document.getElementById("yo").style.display="none";
                restart();
            }
        }
        function randomechoice() {
        let choices = [corner1, edge1, corner2, edge2, center, edge3, corner3, edge4, corner4];
        choices = choices.filter(fn => {
            if (fn === corner1) return !corner1x && !corner1o;
            if (fn === edge1)   return !edge1x   && !edge1o;
            if (fn === corner2) return !corner2x && !corner2o;
            if (fn === edge2)   return !edge2x   && !edge2o;
            if (fn === center)  return !centerx  && !centero;
            if (fn === edge3)   return !edge3x   && !edge3o;
            if (fn === corner3) return !corner3x && !corner3o;
            if (fn === edge4)   return !edge4x   && !edge4o;
            if (fn === corner4) return !corner4x && !corner4o;
        });
        let randomIndex = Math.floor(Math.random() * choices.length);
        let randomFunc = choices[randomIndex];
        randomFunc();
        }
        function Victory() {
            if(corner1x&&edge1x&&corner2x||corner3x&&edge4x&&corner4x||edge2x&&centerx&&edge3x||corner1x&&edge2x&&corner3x||corner2x&&edge3x&&corner4x||edge1x&&centerx&&edge4x||corner1x&&centerx&&corner4x||corner2x&&centerx&&corner3x){    
                document.getElementById("overly").style.display = "block";
                document.getElementById("restart").style.display="block";
                document.getElementById("00").style.display="none";
                document.getElementById("01").style.display="none";
                document.getElementById("02").style.display="none";
                document.getElementById("10").style.display="none";
                document.getElementById("11").style.display="none";
                document.getElementById("12").style.display="none";
                document.getElementById("20").style.display="none";
                document.getElementById("21").style.display="none";
                document.getElementById("22").style.display="none"; 
                victory = true;  
                if(!first){ 
                    computer ++; 
                    document.getElementById("computer").innerHTML=computer;
                    document.getElementById("c'win").style.display="block";
                } else {  
                    player ++;
                    document.getElementById("player").innerHTML=player;  
                    document.getElementById("y'win").style.display="block";
                }  
            } else if(corner1o&&edge1o&&corner2o||corner3o&&edge4o&&corner4o||edge2o&&centero&&edge3o||corner1o&&edge2o&&corner3o||corner2o&&edge3o&&corner4o||edge1o&&centero&&edge4o||corner1o&&centero&&corner4o||corner2o&&centero&&corner3o){  
                document.getElementById("overly").style.display = "block";
                document.getElementById("restart").style.display="block";
                document.getElementById("00").style.display="none";
                document.getElementById("01").style.display="none";
                document.getElementById("02").style.display="none";
                document.getElementById("10").style.display="none";
                document.getElementById("11").style.display="none";
                document.getElementById("12").style.display="none";
                document.getElementById("20").style.display="none";
                document.getElementById("21").style.display="none";
                document.getElementById("22").style.display="none";
                victory = true;  
                if(first){
                    computer ++;
                    document.getElementById("computer").innerHTML=computer;
                    document.getElementById("c'win").style.display="block";
                }
                else{
                    player ++;
                    document.getElementById("player").innerHTML=player;
                    document.getElementById("y'win").style.display="block";
                }
            }else if(count==9){
                document.getElementById("draw").style.display="block";
                document.getElementById("restart").style.display="block";
                document.getElementById("overly").style.display = "block";
            }
            if(first&&count%2==0&&!victory){
                if((edge1o&&corner2o || edge2o&&corner3o || corner4o&&centero)&&!corner1x&&!corner1o){
                    corner1();
                }
                else if((corner1o&&corner2o || centero&&edge4o)&&!edge1x&&!edge1o){
                    edge1();
                }
                else if((corner1o&&edge1o || edge3o&&corner4o || corner3o&&centero)&&!corner2x&&!corner2o){
                    corner2();
                }
                else if((corner3o&&corner1o || centero&&edge3o)&&!edge2x&&!edge2o){
                    edge2();
                }
                else if((edge1o&&edge4o || corner1o&&corner4o || corner2o&&corner3o || edge2o&&edge4o)&&!centerx&&!centero){
                    center();
                }
                else if((centero&&edge2o || corner4o&&corner2o)&&!edge3x&&!edge3o){
                    edge3();
                }
                else if((corner4o&&corner3o || edge1o&&centero)&&!edge4x&&!edge4o){
                    edge4();
                }
                else if((edge4o&&corner4o || edge2o&&corner1o || centero&&corner2o)&&!corner3x&&!corner3o){
                    corner3();
                }
                else if((edge4o&&corner3o || edge3o&&corner2o || centero&&corner1o)&&!corner4x&&!corner4o){
                    corner4();
                }
                else if((edge1x&&corner2x || edge2x&&corner3x || corner4x&&centerx)&&!corner1o&&!corner1x){
                    corner1();
                }
                else if((corner1x&&corner2x || centerx&&edge4x)&&!edge1o&&!edge1x){
                    edge1();
                }
                else if((corner1x&&edge1x || edge3x&&corner4x || corner3x&&centerx)&&!corner2o&&!corner2x){
                    corner2();
                }
                else if((corner3x&&corner1x || centerx&&edge3x)&&!edge2o&&!edge2x){
                    edge2();
                }
                else if((edge1x&&edge4x || corner1x&&corner4x || corner2x&&corner3x || edge2x&&edge4x)&&!centerx&&!centero){
                    center();
                }
                else if((centerx&&edge2x || corner4x&&corner2x)&&!edge3o&&!edge3x){
                    edge3();
                }
                else if((corner4x&&corner3x || edge1x&&centerx)&&!edge4o&&!edge4x){
                    edge4();
                }
                else if((edge4x&&corner4x || edge2x&&corner1x || centerx&&corner2x)&&!corner3o&&!corner3x){
                    corner3();
                }
                else if((edge4x&&corner3x || edge3x&&corner2x || centerx&&corner1x)&&!corner4o&&!corner4x){
                    corner4();
                }
                else{
                    randomechoice();
                }
            }
            if(!first&&count==1&&!centero){
                center();
            }
            else if(!first&&count==1){
                randomechoice();
            }
            if(!first&&count%2==1&&!victory){
                if((edge1x&&corner2x || edge2x&&corner3x || corner4x&&centerx)&&!corner1o&&!corner1x){
                    corner1();
                }
                else if((corner1x&&corner2x || centerx&&edge4x)&&!edge1o&&!edge1x){
                    edge1();
                }
                else if((corner1x&&edge1x || edge3x&&corner4x || corner3x&&centerx)&&!corner2o&&!corner2x){
                    corner2();
                }
                else if((corner3x&&corner1x || centerx&&edge3x)&&!edge2o&&!edge2x){
                    edge2();
                }
                else if((edge1x&&edge4x || corner1x&&corner4x || corner2x&&corner3x || edge2x&&edge4x)&&!centerx&&!centero){
                    center();
                }
                else if((centerx&&edge2x || corner4x&&corner2x)&&!edge3o&&!edge3x){
                    edge3();
                }
                else if((corner4x&&corner3x || edge1x&&centerx)&&!edge4o&&!edge4x){
                    edge4();
                }
                else if((edge4x&&corner4x || edge2x&&corner1x || centerx&&corner2x)&&!corner3o&&!corner3x){
                    corner3();
                }
                else if((edge4x&&corner3x || edge3x&&corner2x || centerx&&corner1x)&&!corner4o&&!corner4x){
                    corner4();
                }
                else if((edge1o&&corner2o || edge2o&&corner3o || corner4o&&centero)&&!corner1x&&!corner1o){
                    corner1();
                }
                else if((corner1o&&corner2o || centero&&edge4o)&&!edge1x&&!edge1o){
                    edge1();
                }
                else if((corner1o&&edge1o || edge3o&&corner4o || corner3o&&centero)&&!corner2x&&!corner2o){
                    corner2();
                }
                else if((corner3o&&corner1o || centero&&edge3o)&&!edge2x&&!edge2o){
                    edge2();
                }
                else if((edge1o&&edge4o || corner1o&&corner4o || corner2o&&corner3o || edge2o&&edge4o)&&!centerx&&!centero){
                    center();
                }
                else if((centero&&edge2o || corner4o&&corner2o)&&!edge3x&&!edge3o){
                    edge3();
                }
                else if((corner4o&&corner3o || edge1o&&centero)&&!edge4x&&!edge4o){
                    edge4();
                }
                else if((edge4o&&corner4o || edge2o&&corner1o || centero&&corner2o)&&!corner3x&&!corner3o){
                    corner3();
                }
                else if((edge4o&&corner3o || edge3o&&corner2o || centero&&corner1o)&&!corner4x&&!corner4o){
                    corner4();
                }
                else{
                    randomechoice();
                }
            }
        }
        function restart() {
            document.getElementById("c'win").style.display="none";
            document.getElementById("y'win").style.display="none";
            document.getElementById("draw").style.display="none";
            document.getElementById("restart").style.display="none";
            document.getElementById("overly").style.display = "none";
            count = 0;
            victory = false;
            edge1x = false;
            edge2x = false;
            edge3x = false;
            edge4x = false;
            corner1x = false;
            corner2x = false;
            corner3x = false;
            corner4x = false;
            centerx = false;
            edge1o = false;
            edge2o = false;
            edge3o = false;
            edge4o = false;
            corner1o = false;
            corner2o = false;
            corner3o = false;
            corner4o = false;
            centero = false;
            document.getElementById("00").style.display="block";
            document.getElementById("01").style.display="block";
            document.getElementById("02").style.display="block";
            document.getElementById("10").style.display="block";
            document.getElementById("11").style.display="block";
            document.getElementById("12").style.display="block";
            document.getElementById("20").style.display="block";
            document.getElementById("21").style.display="block";
            document.getElementById("22").style.display="block";
            document.getElementById("X00").style.display="none";
            document.getElementById("X01").style.display="none";
            document.getElementById("X02").style.display="none";
            document.getElementById("X10").style.display="none";
            document.getElementById("X11").style.display="none";
            document.getElementById("X12").style.display="none";
            document.getElementById("X20").style.display="none";
            document.getElementById("X21").style.display="none";
            document.getElementById("X22").style.display="none";
            document.getElementById("O00").style.display="none";
            document.getElementById("O01").style.display="none";
            document.getElementById("O02").style.display="none";
            document.getElementById("O10").style.display="none";
            document.getElementById("O11").style.display="none";
            document.getElementById("O12").style.display="none";
            document.getElementById("O20").style.display="none";
            document.getElementById("O21").style.display="none";
            document.getElementById("O22").style.display="none";
            if(first){
                firstplayer();
            }
        }
    </script>
</body>
</html>
